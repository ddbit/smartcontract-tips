---
layout: post
title: Token BRC-20, UniSat Wallet è il primo ad adottarli ed è subito hack.
date: 2023-05-21 21:31:17.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
category: Case Study
tags:
- Novit
permalink: "/articoli/brc20-unisat-hack/"
excerpt: Il lancio di "BRC-20" sulla blockchain di Bitcoin ha generato un notevole
  entusiasmo tra gli utenti. BRC-20 è un protocollo token ispirato, almeno per il
  nome, a ERC-20 di Ethereum, che consente agli individui di creare i propri token.
  Questo standard, introdotto a Marzo, utilizza la controversa tecnica di iscrizione
  degli ordinali sviluppata solo a Gennaio. Precedentemente limitata ai soli bitcoin,
  la blockchain ora ospita varie monete come $ORDI, $PEPE e $MEME.
image: /featured_images/upload_1fecad67b7ed083b7f7c391b12200a04.png
---
<div class="<br />
          image-block-outer-wrapper<br />
          layout-caption-below<br />
          design-layout-inline<br />
          combination-animation-site-default<br />
          individual-animation-site-default<br />
          individual-text-animation-site-default<br />
        " data-test="image-block-inline-outer-wrapper"><br />
<figure class="<br />
              sqs-block-image-figure<br />
              intrinsic<br />
            " style="max-width:950px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element</p>
<p>              has-aspect-ratio<br />
            " style="<br />
                position: relative;</p>
<p>                  padding-bottom:55.894737243652344%;</p>
<p>                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);<br />
              "></p></div>
</div>
<p><img data-stretch="false" src="{{ site.baseurl }}/assets/2023/05/upload_1fecad67b7ed083b7f7c391b12200a04.png" data-image="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png" data-image-dimensions="950x531" data-image-focal-point="0.5,0.5" alt="" data-load="false" width="950" height="531" sizes="100vw" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" srcset="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/42293e00-9711-4ec3-a0f2-f97589951faa/upload_1fecad67b7ed083b7f7c391b12200a04.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs" /></p>
</figure>
</div>
<div class="sqs-html-content">
<p class="sqsrte-large" style="white-space:pre-wrap;"><span class="sqsrte-text-color--accent"><strong>Overview</strong></span></p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Il lancio di "BRC-20" sulla blockchain di Bitcoin ha generato un notevole entusiasmo tra gli utenti. BRC-20 è un protocollo token ispirato, almeno per il nome, a ERC-20 di Ethereum, che consente agli individui di creare i propri token. Questo standard, introdotto a Marzo, utilizza la controversa tecnica di iscrizione degli ordinali sviluppata solo a Gennaio. Precedentemente limitata ai soli bitcoin, la blockchain ora ospita varie monete come $ORDI, $PEPE e $MEME.</p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Tuttavia, l'introduzione di questi nuovi token non è stata del tutto priva di problemi. Mentre gli sviluppatori correvano per rilasciare wallet compatibili con questi nuovi token, il wallet UniSat ha affermato di essere il primo a supportarli. Sfortunatamente, poco dopo il suo lancio, gli sviluppatori hanno scoperto una vulnerabilità nell'estensione di Chrome, rendendola inaccessibile. Successivamente hanno rivelato che questa vulnerabilità ha esposto il portafoglio ad attacchi di tipo double spending (doppia spesa).</p>
<p class="sqsrte-large" style="white-space:pre-wrap;">L'attacco è stato notato dal team del progetto, che ha poi segnalato il problema anche su Twitter.</p>
</div>
<div class="<br />
          image-block-outer-wrapper<br />
          layout-caption-below<br />
          design-layout-inline<br />
          combination-animation-site-default<br />
          individual-animation-site-default<br />
          individual-text-animation-site-default<br />
        " data-test="image-block-inline-outer-wrapper"><br />
<figure class="<br />
              sqs-block-image-figure<br />
              intrinsic<br />
            " style="max-width:627px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element</p>
<p>              has-aspect-ratio<br />
            " style="<br />
                position: relative;</p>
<p>                  padding-bottom:61.72248840332031%;</p>
<p>                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);<br />
              "></p></div>
</div>
<p><img data-stretch="false" src="{{ site.baseurl }}/assets/2023/05/upload_961df2323a9d9c1fb4d32c63d392f989.png" data-image="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png" data-image-dimensions="627x387" data-image-focal-point="0.5,0.5" alt="" data-load="false" width="627" height="387" sizes="100vw" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" srcset="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/14296086-49d3-47c4-832f-74e40849c4e9/upload_961df2323a9d9c1fb4d32c63d392f989.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs" /></p>
</figure>
</div>
<div class="sqs-html-content">
<p class="sqsrte-large" style="white-space:pre-wrap;"><span class="sqsrte-text-color--accent"><strong>UniSat Marketplace colpito da un attacco double spending</strong></span></p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Il marketplace UniSat recentemente lanciato è stato colpito di una serie di attacchi. Questi attacchi hanno sfruttato una vulnerabilità all'interno del codice della piattaforma, consentendo agli attori malintenzionati di spendere più volte gli stessi token. È preoccupante che tali attacchi si siano verificati poco dopo l'introduzione del mercato.</p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Sulla base di una prima analisi condotta dal team dell'estensione, sono state interessate circa 70 transazioni su un totale di 383.</p>
</div>
<div class="<br />
          image-block-outer-wrapper<br />
          layout-caption-below<br />
          design-layout-inline<br />
          combination-animation-site-default<br />
          individual-animation-site-default<br />
          individual-text-animation-site-default<br />
        " data-test="image-block-inline-outer-wrapper"><br />
<figure class="<br />
              sqs-block-image-figure<br />
              intrinsic<br />
            " style="max-width:605px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element</p>
<p>              has-aspect-ratio<br />
            " style="<br />
                position: relative;</p>
<p>                  padding-bottom:46.94214630126953%;</p>
<p>                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);<br />
              "></p></div>
</div>
<p><img data-stretch="false" src="{{ site.baseurl }}/assets/2023/05/upload_e6eb1471dff5f3b14bba9cd451845ba4.png" data-image="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png" data-image-dimensions="605x284" data-image-focal-point="0.5,0.5" alt="" data-load="false" width="605" height="284" sizes="100vw" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" srcset="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/255c1086-877e-4182-8bd3-cd2814e889be/upload_e6eb1471dff5f3b14bba9cd451845ba4.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs" /></p>
</figure>
</div>
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;"><span class="sqsrte-text-color--accent"><strong>Attacco double spending</strong></span></h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">La <strong>doppia spesa</strong> si riferisce a un tipo di manipolazione in cui l'autore spende più volte la stessa criptovaluta. Il superamento di questa vulnerabilità è alla base stessa del concetto di criptovaluta, senza la resistenza al double spending non avremmo proprio nulla in mano. </p>
<p class="" data-rte-preserve-empty="true" style="white-space:pre-wrap;">
<h2 style="white-space:pre-wrap;">Cominciamo dalle basi. C’è qualcosa di “debole” nel protocollo BR20</h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">Il protocollo/standard BRC20 è solo indirettamente collegato a Bitcoin. Mentre gli ERC20 seguono il meccanismo di consenso di Ethereum, nel caso del BRC20 non funziona allo stesso modo. Il protocollo Bitcoin non è consapevole di ciò che accade nello standard BRC20 e interpreta il trasferimento come una transazione normale. </p>
<p class="sqsrte-large" style="white-space:pre-wrap;">In altre parole <strong>i miner non guardano dentro le transazioni BRC20, per loro sono solo “rumore” dentro un blocco Bitcoin valido</strong>.</p>
<p class="" data-rte-preserve-empty="true" style="white-space:pre-wrap;">
<p class="sqsrte-large" style="white-space:pre-wrap;">In teoria, la transazione potrebbe essere accettata sulla blockchain di Bitcoin ma respinta sullo standard BRC20, magari perché non rispetta gli standard BRC20. Ad esempio, se qualcuno cerca di inviare 130 token ma ne possiede solo 110, Bitcoin considererà la transazione come valida, ma secondo lo standard BRC20 sarà considerata non valida poiché non è possibile inviare 130 token se se ne possiedono solo 110.</p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Il problema grosso come una casa è che mentre le regole di spesa dei bitcoin sono forti e inattaccabili perché basate su una enorme potenza di calcolo della proof of work nel caso di BRC20 chi controlla che le regole di trasferimento del token siano rispettate? In teoria gli stessi wallet che spediscono e ricevono i token, ma senza il contributo dei miner questi controlli rischiano di risultare abbastanza effimeri. </p>
<p class="" data-rte-preserve-empty="true" style="white-space:pre-wrap;">
<h2 style="white-space:pre-wrap;"><span class="sqsrte-text-color--accent"><strong>Come si orchestra un attacco double spending?</strong></span></h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">Ecco un esempio semplificato per illustrare un attacco a doppia spesa:</p>
<ul data-rte-list="default">
<li>
<p class="sqsrte-large" style="white-space:pre-wrap;">L'aggressore avvia una transazione per l'acquisto di un prodotto o servizio su un mercato online utilizzando una certa quantità di criptovaluta.</p>
</li>
<li>
<p class="sqsrte-large" style="white-space:pre-wrap;">Contemporaneamente, l'attaccante crea un'altra transazione utilizzando gli stessi fondi per inviarli a un altro indirizzo di portafoglio sotto il suo controllo.</p>
</li>
<li>
<p class="sqsrte-large" style="white-space:pre-wrap;">L'aggressore tenta di trasmettere rapidamente entrambe le transazioni alla rete, sperando che almeno una di esse venga confermata prima che la rete riconosca la doppia spesa.</p>
</li>
</ul>
<p class="sqsrte-large" style="white-space:pre-wrap;">In caso di successo, l'attaccante avrà effettivamente speso due volte la stessa criptovaluta, approfittando del ritardo nella conferma della transazione e sfruttando eventuali vulnerabilità nel meccanismo di consenso del sistema.</p>
<h2 style="white-space:pre-wrap;">Lo sviluppatore di BRC20 aveva avvisato: non è sicuro!!</h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">Domo è lo pseudonimo dello sviluppatore dello standard BRC20. Questo sconosciuto aveva avvisato del fatto che andasse trattato con cautela, nel<a href="https://domo-2.gitbook.io/brc-20-experiment/"> sito “ufficiale” </a>si legge:</p>
<blockquote><p class="sqsrte-large" style="white-space:pre-wrap;">It by no means should be considered THE standard for fungibility on bitcoin with ordinals, as I believe there are almost certainly better design choices and optimization improvements to be made. Consequently, this is an extremely dynamic experiment, and I strongly discourage any financial decisions to be made on the basis of it's design.</p>
</blockquote>
<h2 style="white-space:pre-wrap;">UniSat raccoglie i cocci</h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">In risposta alla vulnerabilità, gli sviluppatori di UniSat Marketplace hanno agito rapidamente disabilitando prontamente il portafoglio e riconoscendo pubblicamente il problema tramite Twitter. Hanno assicurato agli utenti che stavano lavorando attivamente per risolvere il problema e hanno sottolineato il loro impegno a dare priorità alla sicurezza dei fondi degli utenti.</p>
</div>
<div class="<br />
          image-block-outer-wrapper<br />
          layout-caption-below<br />
          design-layout-inline<br />
          combination-animation-site-default<br />
          individual-animation-site-default<br />
          individual-text-animation-site-default<br />
        " data-test="image-block-inline-outer-wrapper"><br />
<figure class="<br />
              sqs-block-image-figure<br />
              intrinsic<br />
            " style="max-width:621px;">
<div class="image-block-wrapper" data-animation-role="image">
<div class="sqs-image-shape-container-element</p>
<p>              has-aspect-ratio<br />
            " style="<br />
                position: relative;</p>
<p>                  padding-bottom:46.054752349853516%;</p>
<p>                overflow: hidden;-webkit-mask-image: -webkit-radial-gradient(white, black);<br />
              "></p></div>
</div>
<p><img data-stretch="false" src="{{ site.baseurl }}/assets/2023/05/upload_d433c1042a047bd144c24d57edbe8e96.png" data-image="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png" data-image-dimensions="621x286" data-image-focal-point="0.5,0.5" alt="" data-load="false" width="621" height="286" sizes="100vw" style="display:block;object-fit: cover; width: 100%; height: 100%; object-position: 50% 50%" srcset="https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=100w 100w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=300w 300w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=500w 500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=750w 750w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=1000w 1000w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=1500w 1500w, https://images.squarespace-cdn.com/content/v1/640a182d9182d66162be74d6/7afedb17-7d47-47aa-a7e2-9dc216cbd2f2/upload_d433c1042a047bd144c24d57edbe8e96.png?format=2500w 2500w" loading="lazy" decoding="async" data-loader="sqs" /></p>
</figure>
</div>
<div class="sqs-html-content">
<h2 style="white-space:pre-wrap;">Conclusione:</h2>
<p class="sqsrte-large" style="white-space:pre-wrap;">Il Marketplace UniSat ha corso troppo nell’affidarsi ad uno standard non sufficientemente testato e che manca a mio avviso proprio delle basi per diventare affidabile. Ma su questo potrei anche sbagliarmi ed in futuro la definizione di standard token non “regolati” dal protocollo di consenso della rete in Layer 1 potrebbe anche trovare un livello di sicurezza accettabile. Onestamente sono dubbioso, ma mai dire mai. Questo incidente sottolinea l'importanza di eseguire test e audit completi del codice prima di rilasciarlo al pubblico. Sarebbe interessante fare un confronto non solo tra BRC20 ed ERC20, ma anche con gli altri standard token della blockchain Bitcoin quali RGB. </p>
<p class="sqsrte-large" style="white-space:pre-wrap;">Vale la pena ricordare che la nostra community, SCT ITALIA, ha come obiettivo quello di aumentare la competenza e consapevolezza intorno alle problematiche di sicurezza legate alla blockchain che ahime, hanno fornito tanti esempi di come non ci si dovrebbe buttare a capofitto per usare l’ultima trovata ed essere a tutti i costi i first-mover. Per ora è consigliabile che gli utenti prestino attenzione quando utilizzano UniSat Marketplace fino a quando la questione non sarà completamente chiarita.</p>
</div>
